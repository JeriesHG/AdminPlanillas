<f:view 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:o="http://omnifaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <!--<h:form id="tablaActividades" >-->
        <h:panelGroup id="tablaActidadesWrapper" styleClass="tablaActividadesWrapper" layout="block">

            <h:panelGroup rendered="#{actividadesBean.renderizarTablaActividad}">
                <div class="guardarTodoWrapper">
                    <h:commandButton value="Guardar Activdades" action="#{actividadesBean.salvarTodo()}">

                    </h:commandButton>
                </div>
                <p:dataTable value="#{empleadoBean.listaEmpleados}" var = "empleado" rows="10" editable="true" editMode="cell"
                             paginator="true" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,15">

                    <p:ajax event="cellEdit" listener="#{actividadesBean.onCellEdit}"  update=":actividadesForm:messages"/>

                    <p:column headerText="Empleado">
                        <h:outputText value="#{empleado.nombre}"/>
                    </p:column>
                    <p:column headerText="#{actividadesBean.listaFechas.get(0)}" >
                        <p:cellEditor>
                            <f:facet name="output">#{actividadesBean.mapShowSelectedLabor.get(empleado.nombre).get(actividadesBean.listaFechas.get(0))}</f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu style="width:100%;">
                                    <f:selectItem itemLabel="Selecciona labor" itemDisabled="true"/>
                                    <f:selectItems value="#{laborBean.listaLabores}" var="labor" itemLabel="#{labor.nombre}" itemValue="#{labor.id}"/>
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{actividadesBean.listaFechas.get(1)}" >
                        <p:cellEditor>
                            <f:facet name="output">#{actividadesBean.mapShowSelectedLabor.get(empleado.nombre).get(actividadesBean.listaFechas.get(1))}</f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu style="width:100%;">
                                    <f:selectItem itemLabel="Selecciona labor" itemDisabled="true"/>
                                    <f:selectItems value="#{laborBean.listaLabores}" var="labor" itemLabel="#{labor.nombre}" itemValue="#{labor.id}"/>
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{actividadesBean.listaFechas.get(2)}" >
                        <p:cellEditor>
                            <f:facet name="output">#{actividadesBean.mapShowSelectedLabor.get(empleado.nombre).get(actividadesBean.listaFechas.get(2))}</f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu style="width:100%;">
                                    <f:selectItem itemLabel="Selecciona labor" itemDisabled="true"/>
                                    <f:selectItems value="#{laborBean.listaLabores}" var="labor" itemLabel="#{labor.nombre}" itemValue="#{labor.id}"/>
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{actividadesBean.listaFechas.get(3)}" >
                        <p:cellEditor>
                            <f:facet name="output">#{actividadesBean.mapShowSelectedLabor.get(empleado.nombre).get(actividadesBean.listaFechas.get(3))}</f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu style="width:100%;">
                                    <f:selectItem itemLabel="Selecciona labor" itemDisabled="true"/>
                                    <f:selectItems value="#{laborBean.listaLabores}" var="labor" itemLabel="#{labor.nombre}" itemValue="#{labor.id}"/>
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{actividadesBean.listaFechas.get(4)}" >
                        <p:cellEditor>
                            <f:facet name="output">#{actividadesBean.mapShowSelectedLabor.get(empleado.nombre).get(actividadesBean.listaFechas.get(4))}</f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu style="width:100%;">
                                    <f:selectItem itemLabel="Selecciona labor" itemDisabled="true"/>
                                    <f:selectItems value="#{laborBean.listaLabores}" var="labor" itemLabel="#{labor.nombre}" itemValue="#{labor.id}"/>
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>

                </p:dataTable>
            </h:panelGroup>
        </h:panelGroup>
        <!--</h:form>-->
    </ui:composition>

</f:view>